import sys
import re
import urllib.request
import urllib.error
import urllib.parse
import random
import hashlib
import requests
import os
import argparse
import pyvirtualdisplay
from selenium import webdriver
import datetime

timestamp_now = datetime.datetime.now().strftime('%Y-%m-%d')

parser = argparse.ArgumentParser(description='MalCol v1.0')
parser.add_argument("-c", "--count", nargs=1, type=int, help="Defines the number of malware samples you want, up to 5000. If the argument is omitted, sets to 100 by default.", required=False, default=argparse.SUPPRESS, metavar="SAMPLES")
parser.add_argument("-r", "--rename", help="[Not recommended] Makes the samples executable. Don't use this unless you're confident you won't execute them on your host.", required=False, action="store_const", const=True)
parser.add_argument("-y", "--yes-to-all", help="Skips the confirmation prompt.", required=False, action="store_const", const=True)

def confirmation(question, default="no"):
    valid = {"yes": True, "y": True, "ye": True, "no": False, "n": False}
    if default is None:
        prompt = " [y/n] "
    elif default == "yes":
        prompt = " [Y/n] "
    elif default == "no":
        prompt = " [y/N] "
    validInputEntered = False
    while not validInputEntered:
        data = input("{}{}".format(question, prompt)).lower()
        if data in valid:
            validInputEntered = True
            return valid[data]
        if data == "":
            validInputEntered = True
            return default

args = parser.parse_args()
print(args)
if not "count" in args:
    print("[*] Argument was omitted - going with 100 samples by default")
    scount = 100
else:
    scount = args.count[0]
